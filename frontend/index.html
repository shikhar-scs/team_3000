<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Walmart HyperDelivery</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/main.css">

    <!-- script
    ================================================== -->
    <script src="js/modernizr.js"></script>
    <script src="js/pace.min.js"></script>

    <!-- favicons
    ================================================== -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <style>
        /* Set the size of the div element that contains the map */
        #g_map {
            height: 600px;  /* The height is 400 pixels */
            width: 100%;  /* The width is the width of the web page */
        }
    </style>

</head>

<body id="top">

    <!-- header
    ================================================== -->
    <header class="s-header">

<!--        <div class="header-logo">-->
<!--            <a class="site-logo" href="index.html">-->
<!--                <img src="images/logo.svg" alt="Homepage">-->
<!--            </a>-->
<!--        </div> &lt;!&ndash; end header-logo &ndash;&gt;-->

        <nav class="header-nav">

            <a href="#0" class="header-nav__close" title="close"><span>Close</span></a>

            <div class="header-nav__content">
                <h3>LAST MILE DELIVERY</h3>
                
                <ul class="header-nav__list">
                    <li class="current"><a class="smoothscroll"  href="#home" title="home">Home</a></li>
                    <li><a class="smoothscroll"  href="#map" title="map">Map</a></li>
                    <li><a class="smoothscroll"  href="#contact" title="contact">Contact</a></li>

                </ul>

<!--                <p>Perspiciatis hic praesentium nesciunt. Et neque a dolorum <a href='#0'>voluptatem</a> porro iusto sequi veritatis libero enim. Iusto id suscipit veritatis neque reprehenderit.</p>-->

                <ul class="header-nav__social">
                    <li>
                        <a href="#0"><i class="fab fa-facebook"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-twitter"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-instagram"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-behance"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-dribbble"></i></a>
                    </li>
                </ul>

            </div> <!-- end header-nav__content -->

        </nav> <!-- end header-nav -->

        <a class="header-menu-toggle" href="#0">
            <span class="header-menu-icon"></span>
        </a>

    </header> <!-- end s-header -->


    <!-- home
    ================================================== -->
    <section id="home" class="s-home target-section" data-parallax="scroll" data-image-src="images/us-post-office.jpg" data-natural-width=2500 data-natural-height=1800 data-position-y=top>

        <div class="shadow-overlay"></div>

        <div class="home-content">

            <div class="row home-content__main">
                <h1>
                Hello folks, we are <br>
                Walmart Postal services.
                </h1>

                <p>
                Drag your csv file here --><br>
                to calculate the optimum path.
                </p>
                <div class="container" id="cuti">
                <div class="input-group row">
                    <form ref='uploadForm' id='uploadForm' method='post'  encType="multipart/form-data">

                    <div class="custom-file col-sm-11">
                        <input style="font-size: 3.3rem;" type="file" name="sampleFile" accept=".csv"  id="inputGroupFile04" required/>
<!--                        <label for="inputGroupFile04" style="background-color: transparent">Choose file</label>-->
                    </div>
                    </form>
                    <div class="input-group-append col-sm-1" >
                       <a> <button class="btn btn-outline-secondary cuti-btn" id="submit_btn">Upload</button>
                    </div>
                </div>
                </div>

            </div> <!-- end home-content__main -->

        </div> <!-- end home-content -->

        <ul class="home-sidelinks">
            <li style="display: none"><a class="smoothscroll"><span></span></a></li>
            <li><a class="smoothscroll" href="#map">Map<span>Find optimum path</span></a></li>
            <li><a  class="smoothscroll" href="#contact">Contact<span>get in touch</span></a></li>
        </ul> <!-- end home-sidelinks -->

        <ul class="home-social">
            <li class="home-social-title">Follow Us</li>
            <li><a href="#0">
                <i class="fab fa-facebook"></i>
                <span class="home-social-text">Facebook</span>
            </a></li>
            <li><a href="#0">
                <i class="fab fa-twitter"></i>
                <span class="home-social-text">Twitter</span>
            </a></li>
            <li><a href="#0">
                <i class="fab fa-linkedin"></i>
                <span class="home-social-text">LinkedIn</span>
            </a></li>
        </ul> <!-- end home-social -->

        <a href="#contact" class="home-scroll smoothscroll">
            <span class="home-scroll__text">Scroll Down</span>
            <span class="home-scroll__icon"></span>
        </a> <!-- end home-scroll -->

    </section> <!-- end s-home -->



    <section id='map' class="s-services light-gray">

        <div class="row section-header" data-aos="fade-up">
            <div class="col-full" id="g_map">

            </div>
            <h4 class="" id ="display_values">We have everything you need to launch and grow a successful digital business.</h4>
        </div> <!-- end section-header -->

<!--        <div class="row" data-aos="fade-up">-->
<!--            <div class="col-full">-->
<!--                <p class="lead">-->
<!--                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse.-->
<!--                </p>-->
<!--            </div>-->
<!--        </div> &lt;!&ndash; end about-desc &ndash;&gt;-->

<!--        <div class="row services-list block-1-3 block-m-1-2 block-tab-full">-->

<!--            <div class="col-block service-item " data-aos="fade-up">-->
<!--                <div class="service-icon service-icon&#45;&#45;brand-identity">-->
<!--                    <i class="icon-tv"></i>-->
<!--                </div>-->
<!--                <div class="service-text">-->
<!--                    <h3 class="h4">Brand Identity</h3>-->
<!--                    <p>Nemo cupiditate ab quibusdam quaerat impedit magni. Earum suscipit ipsum laudantium.-->
<!--                    Quo delectus est. Maiores voluptas ab sit natus veritatis ut. Debitis nulla cumque veritatis.-->
<!--                    Sunt suscipit voluptas ipsa in tempora esse soluta sint.-->
<!--                    </p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="col-block service-item" data-aos="fade-up">-->
<!--                <div class="service-icon  service-icon&#45;&#45;illustration">-->
<!--                    <i class="icon-group"></i>-->
<!--                </div>-->
<!--                <div class="service-text">-->
<!--                    <h3 class="h4">Illustration</h3>-->
<!--                    <p>Nemo cupiditate ab quibusdam quaerat impedit magni. Earum suscipit ipsum laudantium.-->
<!--                    Quo delectus est. Maiores voluptas ab sit natus veritatis ut. Debitis nulla cumque veritatis.-->
<!--                    Sunt suscipit voluptas ipsa in tempora esse soluta sint.-->
<!--                    </p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="col-block service-item" data-aos="fade-up">-->
<!--                <div class="service-icon  service-icon&#45;&#45;web-design">-->
<!--                    <i class="icon-earth"></i>-->
<!--                </div>-->
<!--                <div class="service-text">-->
<!--                    <h3 class="h4">Web Design</h3>-->
<!--                    <p>Nemo cupiditate ab quibusdam quaerat impedit magni. Earum suscipit ipsum laudantium.-->
<!--                    Quo delectus est. Maiores voluptas ab sit natus veritatis ut. Debitis nulla cumque veritatis.-->
<!--                    Sunt suscipit voluptas ipsa in tempora esse soluta sint.-->
<!--                    </p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="col-block service-item" data-aos="fade-up">-->
<!--                <div class="service-icon service-icon&#45;&#45;product-strategy">-->
<!--                    <i class="icon-cube"></i>-->
<!--                </div>-->
<!--                <div class="service-text">-->
<!--                    <h3 class="h4">Product Strategy</h3>-->
<!--                    <p>Nemo cupiditate ab quibusdam quaerat impedit magni. Earum suscipit ipsum laudantium.-->
<!--                    Quo delectus est. Maiores voluptas ab sit natus veritatis ut. Debitis nulla cumque veritatis.-->
<!--                    Sunt suscipit voluptas ipsa in tempora esse soluta sint.-->
<!--                    </p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="col-block service-item" data-aos="fade-up">-->
<!--                <div class="service-icon  service-icon&#45;&#45;ui-design">-->
<!--                    <i class="icon-window"></i>-->
<!--                </div>-->
<!--                <div class="service-text">-->
<!--                    <h3 class="h4">UI/UX Design</h3>-->
<!--                    <p>Nemo cupiditate ab quibusdam quaerat impedit magni. Earum suscipit ipsum laudantium.-->
<!--                    Quo delectus est. Maiores voluptas ab sit natus veritatis ut. Debitis nulla cumque veritatis.-->
<!--                    Sunt suscipit voluptas ipsa in tempora esse soluta sint.-->
<!--                    </p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="col-block service-item" data-aos="fade-up">-->
<!--                <div class="service-icon service-icon&#45;&#45;mobile-dev">-->
<!--                    <i class="icon-lego-block"></i>-->
<!--                </div>-->
<!--                <div class="service-text">-->
<!--                    <h3 class="h4">Mobile Development</h3>-->
<!--                    <p>Nemo cupiditate ab quibusdam quaerat impedit magni. Earum suscipit ipsum laudantium.-->
<!--                    Quo delectus est. Maiores voluptas ab sit natus veritatis ut. Debitis nulla cumque veritatis.-->
<!--                    Sunt suscipit voluptas ipsa in tempora esse soluta sint.-->
<!--                    </p>-->
<!--                </div>-->
<!--            </div>-->

<!--        </div> &lt;!&ndash; end services-list &ndash;&gt;-->

    </section> <!-- end s-services -->

    <section id="contact" class="s-contact">

        <div class="row section-header" data-aos="fade-up">
            <div class="col-full">
                <h3 class="subhead subhead--light">Contact Us</h3>
                <h1 class="display-1 display-1--light">TEAM 3000!!</h1>
                <h2 class="display-1 display-1--light">Get in touch at for a superior experience!!</h2>
            </div>
        </div> <!-- end section-header -->

        <div class="row">

            <div class="col-full contact-main" data-aos="fade-up">
                <p>
                <a href="mailto:#0" class="contact-email">Walmart, "Love You 3000!!" </a>
                <span class="contact-number">+ (91) 080 4035 8008</span>
                </p>
            </div> <!-- end contact-main -->

        </div> <!-- end row -->

        <div class="row">

            <div class="col-five tab-full contact-secondary" data-aos="fade-up">
                <h3 class="subhead subhead--light">Where To Find Us</h3>

                <p class="contact-address">
                    Block B, Ground Floor, Hall Mark building, Outer Ring Rd, Kaverappa Layout, Kadabeesanahalli, Bengaluru<br>
                    Karnataka, India 560103
                </p>
            </div> <!-- end contact-secondary -->

            <div class="col-five tab-full contact-secondary" data-aos="fade-up">
                <h3 class="subhead subhead--light">Follow Us</h3>

                <ul class="contact-social">
                    <li>
                        <a href="#0"><i class="fab fa-facebook"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-twitter"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-instagram"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-behance"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-dribbble"></i></a>
                    </li>
                </ul> <!-- end contact-social -->



        </div> <!-- end row -->
            <div class="row" >
                <div class="col-full cl-copyright" style="font-size:3px">
                <span style="font-size:0px"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></span>
                </div>

        <div class="cl-go-top">
            <a class="smoothscroll" title="Back to Top" href="#top"><i class="icon-arrow-up" aria-hidden="true"></i></a>
        </div>

    </section> <!-- end s-contact -->


    <!-- photoswipe background
    ================================================== -->
    <div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">

        <div class="pswp__bg"></div>
        <div class="pswp__scroll-wrap">

            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>

            <div class="pswp__ui pswp__ui--hidden">
                <div class="pswp__top-bar">
                    <div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title=
                    "Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title=
                    "Zoom in/out"></button>
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                            <div class="pswp__preloader__cut">
                                <div class="pswp__preloader__donut"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div>
                </div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title=
                "Next (arrow right)"></button>
                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>
            </div>

        </div>

    </div> <!-- end photoSwipe background -->


    <!-- preloader
    ================================================== -->
    <div id="preloader">
        <div id="loader">
        </div>
    </div>


    <!-- Java Script
    ================================================== -->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>


    <script>
        var map;
        function send_image(e) {
            var sampleFile = new FormData($('#uploadForm')[0]);
            $.ajax({
                url: "/fileupload",
                type: 'POST',
                data: sampleFile,
                processData: false,
                contentType: false,
                success: function (data) {
                    console.log(data);
                }
            }).done( (m) => {
                let center = m.split("$$")[0].split(",")
                map.setCenter(new google.maps.LatLng(parseFloat(center[0]), parseFloat(center[1])))
                data=m.split("$$")[1]
                console.log(data)
                debugger
                data = data.substring(2).slice(0, -3).split("], [")
                data.forEach((d) => {
                    let k = d.split(", ")

                    new google.maps.Marker({position: {lat: parseFloat(k[0]), lng: parseFloat(k[1])}, map: map});
                })

                generate_directions(center, data);
                // $("#color_image").attr("src","http://localhost:3000/dist/image_Output/img_0.png")
            })
        }
        $('#submit_btn').click(()=>send_image())

        function generate_directions(center, data) {
            var directionsService = new google.maps.DirectionsService;
            var directionsDisplay = new google.maps.DirectionsRenderer;
            directionsDisplay.setMap(map);
            var waypts = [];
            data.forEach((d) => {
                let k = d.split(", ")
                waypts.push({
                  location: {lat: parseFloat(k[0]), lng: parseFloat(k[1])}  ,
                    stopover: true
                })
            })
            directionsService.route({
                origin: {lat: parseFloat(center[0]), lng: parseFloat(center[1])},
                destination: {lat: parseFloat(center[0]), lng: parseFloat(center[1])},
                waypoints: waypts,
                optimizeWaypoints: true,
                travelMode: 'DRIVING'
            }, function(response, status) {
                if (status === 'OK') {
                    directionsDisplay.setDirections(response);
                    var route = response.routes[0];
                    console.log(route)
                    var total_dist = 0
                    var total_time = 0
                    // For each route, display summary information.
                    for (var i = 0; i < route.legs.length; i++) {
                         total_dist += route.legs[i].distance.value
                        total_time += route.legs[i].duration.value
                    }
                    total_dist/=1609
                    total_time/=60
                    var display_values = document.getElementById("display_values")
                    var str = "Total Distance = " + total_dist.toFixed(2) +  " miles. Total travel Time =  " + total_time.toFixed(2) + " min." + " Postage & Handling Time = " + route.legs.length*2 + " mins. (2 mins per drop)"
                    display_values.innerText = str;

                } else {
                    window.alert('Directions request failed due to ' + status);
                }
            })

        }



        // Initialize and add the map
        function initMap() {
            // The location of Uluru,
            var uluru = {lat: 37.625086, lng: -122.433593};
            // The map, centered at Uluru
            map = new google.maps.Map(
                document.getElementById('g_map'), {zoom: 12, center: uluru});
            // The marker, positioned at Uluru
            var marker = new google.maps.Marker({position: uluru, map: map});
        }
    </script>
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function
    -->

    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHhznVjkzisWwTBaAnVEImPWf6L0xoq4U&callback=initMap">
    </script>


</body>

</html>